/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package edu.duke.ece651.team16.server;

import java.io.IOException;
import java.net.ServerSocket;

public class App {
  private final int port;
  private ServerSocket listenSocket;
  private Server server;

  /*
   * Constructor for app
   * 
   * @param port the port number to listen on
   */
  public App(int port) {
    this.port = port;
  }

  /*
   * Create a server socket
   *
   * @throws IOException if the server socket cannot be created
   */
  public void createServerSocket() throws IOException {
    this.listenSocket = new ServerSocket(port);
  }

  /*
   * Create a server
   */
  public void createServer() {
    this.server = new Server(listenSocket);
  }

  /*
   * Run the server
   *
   * @throws IOException if the server cannot be run
   */
  public void runServer() throws IOException {
    // Create a new instance of the Server class and pass in the port number
    try {
      server.run();
    } catch (IOException e) {
      System.out.println("Server run failed with IOException.");
    } finally {
      listenSocket.close();
    }
  }

  public static void main(String[] args) throws IOException {
    // Set the port number to 1651
    App app = new App(1651);
    // int port = 1651;
    app.createServerSocket();
    app.createServer();
    app.runServer();
  }
}
